<div class="min-h-screen bg-background-light dark:bg-background-dark font-body">
  <div class="p-6 min-h-screen bg-gray-50">
    <div class="mx-auto space-y-6 max-w-7xl">
      <!-- Header -->
      <div
        class="flex flex-col gap-4 justify-between items-start sm:flex-row sm:items-center"
        >
        <div>
          <h1 class="text-2xl font-bold text-gray-900">Work Shifts</h1>
          <p class="mt-1 text-sm text-gray-500">
            Manage working hours and schedules
          </p>
        </div>
        <button
          routerLink="/attendance/shifts/add"
          class="flex gap-2 justify-center items-center px-5 py-2.5 font-medium text-white bg-blue-600 rounded-xl shadow-sm transition-all hover:bg-blue-700 hover:shadow-md"
          >
          <span class="text-xl material-symbols-outlined">add</span>
          Add Shift
        </button>
      </div>

      <!-- Search & Filter Bar -->
      <div class="p-4 bg-white rounded-xl border border-gray-100 shadow-sm">
        <div class="relative max-w-md">
          <span
            class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
            >
            <span class="text-gray-400 material-symbols-outlined">search</span>
          </span>
          <input
            type="text"
            [(ngModel)]="searchTerm"
            (keyup.enter)="onSearch()"
            placeholder="Search shifts..."
            class="block py-2 pr-3 pl-10 w-full placeholder-gray-400 rounded-lg border border-gray-200 transition-all outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
          </div>
        </div>

        <!-- Data Table -->
        <div
          class="overflow-hidden bg-white rounded-xl border border-gray-100 shadow-sm"
          >
          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left text-gray-600">
              <thead
                class="text-xs font-semibold text-gray-500 uppercase border-b border-gray-100 bg-gray-50/50"
                >
                <tr>
                  <th class="px-6 py-4">Status</th>
                  <th class="px-6 py-4">Code</th>
                  <th class="px-6 py-4">Name</th>
                  <th class="px-6 py-4">Time Range</th>
                  <th class="px-6 py-4">Hours</th>
                  <th class="px-6 py-4 text-right">Actions</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-50">
                @if (loading) {
                  <tr>
                    <td colspan="6" class="px-6 py-12 text-center text-gray-400">
                      <span class="text-3xl animate-spin material-symbols-outlined"
                        >sync</span
                        >
                        <p class="mt-2 text-sm">Loading shifts...</p>
                      </td>
                    </tr>
                  }
                  @if (!loading && shifts.length === 0) {
                    <tr>
                      <td colspan="6" class="px-6 py-12 text-center text-gray-400">
                        <span class="mb-2 text-4xl material-symbols-outlined"
                          >calendar_off</span
                          >
                          <p>No shifts found.</p>
                        </td>
                      </tr>
                    }
                    @for (shift of shifts; track trackByIndex($index, shift)) {
                      <tr
                        class="transition-colors hover:bg-gray-50/50"
                        >
                        <td class="px-6 py-4">
                          <span
                            class="inline-flex items-center px-2.5 py-0.5 text-xs font-medium rounded-full"
                    [ngClass]="
                      shift.isActive
                        ? 'bg-green-50 text-green-700 border border-green-100'
                        : 'bg-gray-100 text-gray-700 border border-gray-200'
                    "
                            >
                            {{ shift.isActive ? "Active" : "Inactive" }}
                          </span>
                        </td>
                        <td
                          class="px-6 py-4 font-mono text-xs font-medium text-gray-500"
                          >
                          {{ shift.code }}
                        </td>
                        <td class="px-6 py-4 font-medium text-gray-900">
                          {{ shift.name }}
                        </td>
                        <td class="px-6 py-4">
                          <div class="flex flex-col">
                            <span class="font-medium text-gray-900">
                              {{ shift.startTime | slice: 0 : 5 }} -
                              {{ shift.endTime | slice: 0 : 5 }}
                            </span>
                            @if (shift.isOvernight) {
                              <span
                                class="mt-0.5 text-xs font-medium text-purple-600"
                                >
                                Overnight Capable
                              </span>
                            }
                          </div>
                        </td>
                        <td class="px-6 py-4">{{ shift.standardWorkingHours }} hrs</td>
                        <td class="px-6 py-4 space-x-2 text-right">
                          <button
                            (click)="editShift(shift.id)"
                            class="p-1.5 text-gray-400 rounded-lg transition-colors hover:text-blue-600 hover:bg-blue-50"
                            title="Edit"
                            >
                            <span class="text-xl material-symbols-outlined">edit</span>
                          </button>
                          <button
                            (click)="deleteShift(shift.id)"
                            class="p-1.5 text-gray-400 rounded-lg transition-colors hover:text-red-600 hover:bg-red-50"
                            title="Delete"
                            >
                            <span class="text-xl material-symbols-outlined"
                              >delete</span
                              >
                            </button>
                          </td>
                        </tr>
                      }
                    </tbody>
                  </table>
                </div>

                <!-- Pagination -->
                <div
                  class="flex justify-between items-center px-6 py-4 border-t border-gray-100 bg-gray-50/30"
                  >
                  <span class="text-sm text-gray-500">
                    Showing
                    <span class="font-medium text-gray-900">{{
                      (currentPage - 1) * pageSize + 1
                    }}</span>
                    to
                    <span class="font-medium text-gray-900">{{
                      currentPage * pageSize > totalRecords
                      ? totalRecords
                      : currentPage * pageSize
                    }}</span>
                    of
                    <span class="font-medium text-gray-900">{{ totalRecords }}</span>
                    results
                  </span>
                  <div class="flex gap-2">
                    <button
                      [disabled]="currentPage === 1"
                      (click)="onPageChange(currentPage - 1)"
                      class="p-2 text-gray-400 transition-colors hover:text-gray-600 disabled:opacity-30 disabled:hover:text-gray-400"
                      >
                      <span class="material-symbols-outlined">chevron_left</span>
                    </button>
                    @for (page of getPages(); track trackByPage($index, page)) {
                      <button
                        (click)="onPageChange(page)"
                        class="w-8 h-8 text-sm font-medium rounded-lg transition-colors"
              [ngClass]="
                currentPage === page
                  ? 'bg-blue-600 text-white shadow-sm'
                  : 'text-gray-600 hover:bg-gray-100'
              "
                        >
                        {{ page }}
                      </button>
                    }
                    <button
                      [disabled]="currentPage === totalPages"
                      (click)="onPageChange(currentPage + 1)"
                      class="p-2 text-gray-400 transition-colors hover:text-gray-600 disabled:opacity-30 disabled:hover:text-gray-400"
                      >
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
