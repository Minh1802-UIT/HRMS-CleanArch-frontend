<div class="space-y-10" [formGroup]="formGroup">
  <!-- Profile Picture Section -->
  <div class="flex gap-8 items-start">
    <div
      class="flex overflow-hidden relative flex-col justify-center items-center p-4 w-40 h-40 rounded-xl border-2 border-gray-300 dark:border-zinc-600 border-dashed transition-all cursor-pointer hover:border-violet-500 dark:hover:border-violet-400 hover:bg-violet-50/50 dark:hover:bg-violet-900/10 group"
      (click)="fileInput.click()"
    >
      <input
        #fileInput
        type="file"
        class="hidden"
        accept="image/*"
        (change)="onFileSelected($event)"
      />

      @if (!uploading) {
        @if (previewUrl) {
          <img
            [src]="previewUrl"
            class="object-cover absolute inset-0 w-full h-full"
          />
          <div
            class="flex absolute inset-0 flex-col gap-2 justify-center items-center opacity-0 transition-opacity bg-black/40 group-hover:opacity-100"
          >
            <span class="text-white text-xs font-bold">Change Photo</span>
            <button
              type="button"
              (click)="removePhoto(); $event.stopPropagation()"
              class="flex justify-center items-center p-1 text-white bg-red-500 rounded-full transition-colors hover:bg-red-600"
            >
              <span class="text-xs material-symbols-outlined">delete</span>
            </button>
          </div>
        } @else {
          <div
            class="flex justify-center items-center mb-2 w-10 h-10 bg-gray-100 dark:bg-zinc-700 rounded-full transition-transform group-hover:scale-110"
          >
            <span
              class="text-gray-400 dark:text-zinc-500 material-symbols-outlined"
              >upload_file</span
            >
          </div>
          <span
            class="text-xs text-center font-medium text-gray-500 dark:text-zinc-400"
            >Drag image or click</span
          >
        }
      } @else {
        <div
          class="w-8 h-8 rounded-full border-2 border-blue-600 animate-spin border-t-transparent"
        ></div>
      }
    </div>

    <div class="flex-1 pt-2">
      <h3 class="mb-1 text-base font-bold text-gray-900 dark:text-zinc-100">
        Profile Picture
      </h3>
      <p class="mb-4 text-xs leading-relaxed text-gray-500 dark:text-zinc-400">
        Upload a professional photo for the employee profile.<br />
        Supported formats:
        <strong class="text-gray-700 dark:text-zinc-300">.jpg, .png</strong>
        (Max 5MB)
      </p>
    </div>
  </div>

  <!-- Form Fields Grid -->
  <div class="grid grid-cols-2 gap-y-6 gap-x-8">
    <app-form-input
      [formGroup]="formGroup"
      controlName="firstName"
      label="First Name"
      placeholder="First Name"
      [required]="true"
    ></app-form-input>

    <app-form-input
      [formGroup]="formGroup"
      controlName="lastName"
      label="Last Name"
      placeholder="Last Name"
      [required]="true"
    ></app-form-input>

    <div class="col-span-2">
      <app-form-input
        [formGroup]="formGroup"
        controlName="email"
        label="Work Email"
        placeholder="email@company.com"
        [required]="true"
        type="email"
      ></app-form-input>
      @if (formGroup.get("email")?.touched && formGroup.get("email")?.invalid) {
        <p class="mt-1 text-[11px] text-red-500 font-medium">
          Please provide a valid email address.
        </p>
      }
    </div>

    <app-form-input
      [formGroup]="formGroup"
      controlName="phone"
      label="Phone Number"
      placeholder="+1 (555) 000-0000"
    ></app-form-input>

    <app-form-input
      [formGroup]="formGroup"
      controlName="dob"
      label="Date of Birth"
      type="date"
      [required]="true"
    ></app-form-input>

    <app-form-select
      [formGroup]="formGroup"
      controlName="gender"
      label="Gender"
      [options]="[
        { value: 'Male', label: 'Male' },
        { value: 'Female', label: 'Female' },
        { value: 'Other', label: 'Other' },
      ]"
      optionValue="value"
      optionLabel="label"
      placeholder="Select Gender"
    ></app-form-select>

    <app-form-input
      [formGroup]="formGroup"
      controlName="identityCard"
      label="National ID / Passport Number"
      placeholder="National ID / Passport Number"
    ></app-form-input>

    <div class="col-span-2">
      <app-form-input
        [formGroup]="formGroup"
        controlName="address"
        label="Residential Address"
        placeholder="Enter full address"
      ></app-form-input>
    </div>

    <!-- New Fields -->
    <app-form-select
      [formGroup]="formGroup"
      controlName="maritalStatus"
      label="Marital Status"
      [options]="[
        { value: 'Single', label: 'Single' },
        { value: 'Married', label: 'Married' },
        { value: 'Divorced', label: 'Divorced' },
        { value: 'Widowed', label: 'Widowed' },
      ]"
      optionValue="value"
      optionLabel="label"
      placeholder="Select Status"
    ></app-form-select>

    <app-form-input
      [formGroup]="formGroup"
      controlName="nationality"
      label="Nationality"
      placeholder="Nationality"
    ></app-form-input>

    <app-form-input
      [formGroup]="formGroup"
      controlName="hometown"
      label="Hometown"
      placeholder="Hometown"
    ></app-form-input>

    <app-form-input
      [formGroup]="formGroup"
      controlName="country"
      label="Country"
      placeholder="Country"
    ></app-form-input>

    <app-form-input
      [formGroup]="formGroup"
      controlName="city"
      label="City"
      placeholder="City"
    ></app-form-input>

    <app-form-input
      [formGroup]="formGroup"
      controlName="postalCode"
      label="Postal Code"
      placeholder="Postal Code"
    ></app-form-input>
  </div>
</div>
